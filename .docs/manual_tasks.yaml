# Note that tasks can't necessarily be followed in order

App Store:
  Preferences:
    In-App Ratings \& Reviews: False
  Install:
    AdGuard for Safari: https://apps.apple.com/gb/app/adguard-for-safari/id1440147259
    Bitwarden: https://apps.apple.com/gb/app/bitwarden/id1352778147
    Linn Kazoo: https://apps.apple.com/gb/app/linn-kazoo/id848937349
    Numbers: https://apps.apple.com/gb/app/numbers/id409203825
    Pages: https://apps.apple.com/gb/app/pages/id409201541
    WireGuard: https://apps.apple.com/gb/app/wireguard/id1451685025
    Microsoft Excel: https://apps.apple.com/gb/app/microsoft-excel/id462058435
    Microsoft OneDrive: https://apps.apple.com/gb/app/onedrive/id823766827
    Microsoft PowerPoint: https://apps.apple.com/gb/app/microsoft-powerpoint/id462062816
    Microsoft Word: https://apps.apple.com/gb/app/microsoft-word/id462054704

System Preferences:
  Apple ID:
    iCloud:
      Photos: False
      Mail: False
      Contacts: False
      Calendars: False
      News: False

  Siri:
    Listen for \"Hey Siri": True

  Notifications:
    Cisco Webex Meetings:
      Allow Notifications: True
    Firefox:
      Allow Notifications: True
    iTerm:
      Allow Notifications: True
    LaunchBar:
      Allow Notifications: True
    NetNewsWire:
      Allow Notifications: True
    Qobuz:
      Allow Notifications: True
    Telegram:
      Allow Notifications: True
    terminal-notifier:
      Allow Notifications: True
    Textual:
      Allow Notifications: True
    Tunnelblick:
      Allow Notifications: True
    Vagrant Manager:
      Allow Notifications: True
    VMware Fusion:
      Allow Notifications: True
    WhatsApp:
      Allow Notifications: True
    zoom.us:
      Allow Notifications: True

  Internet Accounts:
    Canonical:
      - Mail
      - Contacts
      - Calendars
    DSE:  # As Exchange account
      - Mail
      - Contacts
      - Calendars
    Personal:
      - Mail
      - Contacts
      - Calendars

  Touch ID: Add fingerprints

  Extensions:
    Share Menu:
      - Add to Reading List  # Always first in Safari Share Menu
      - Telegram
      - Mail
      - Messages
      - AirDrop
      - iCloud Sharing

  Security \& Privacy:
    General:
      Require password after sleep or screen saver begins: 5 seconds
    Firewall:
      Firewall: True
    Privacy:
      Location Services:
        Enabled: True
        Apps:
          - System Services:
            Services:
              # Disable Wi-Fi Networking
              - Location-Based Suggestions  # default
              - Time Zone & System Customisation  # default
              - Significant Locations  # default
              - Find My Mac  # default
              - HomeKit  # default
      Contacts:
        - iTerm.app  # For app_settings.sh to configure Contacts.app
      Accessibility:
        - LaunchBar.app  # Required for certain features: https://www.obdev.at/products/launchbar/releasenotes.html
        - skhd
        - SoundSource.app
        - VMware Fusion.app
        - yabai
      Input Monitoring:
        - karabiner_grabber
        - karabiner_observer
        - iTerm.app
      Full Disk Access:
        - LaunchBar.app  # Required for certain indexing rules: https://www.obdev.at/products/launchbar/releasenotes.html
        - iTerm.app
      Automation:
        iTerm.app:  # Will only appear when triggered
          - System Events.app
      Analytics \& Improvements:
        Share Mac Analytics: False  # Might be re-enabled when sharing crash reports
        Improve Siri \& Dictation: False
      Apple Advertising:
        Personalised Ads: False

  Network:
    - Add Home VPN location with appropriate Wi-Fi DNS/search domain settings
    - Add Google DNS location with appropriate Wi-Fi DNS/search domain settings

  Keyboard:
    Keyboard:
      Adjust keyboard brightness in low light: False
      Modifier Keys:
        Planck:
          Option: Command
          Command: Option
    Shortcuts:
      Mission Control:
        Mission Control: Alt + Ctrl + M
        Show Notification Center: Alt + N
        Turn Do Not Disturb On/Off: Alt + Shift + N
        Application windows: Alt + A
        Move left a space: False
        Move right a space: False
        Switch to Desktop \[1-10]: Alt + [q-p]
      Keyboard:
        Move focus to the next window: Alt + Tab
      Spotlight:
        Show Spotlight search: False
    Input Sources:
      Sources:
        - British - PC
      Show Input menu in menu bar: False  # Scriptable, but enabled by changing input sources

  Displays:
    Display:
      Built-in Retina Display:
        Resolution:
          Scaled: Looks like 2048x1280
        Automatically adjust brightness: False
        True Tone: False
      Acer X34:
        Refresh Rate (Hz): 100
    Colour:
      Display profile: Set profile for each display
    Night Shift:
      Schedule: Sunset to Sunrise
    Arrangement: Menu bar to external

  Sharing:
    Computer Name: Set as appropriate

# Using 'All Desktops' instead of yabai rules means no SIP changes needed
# Using PlistBuddy/defaults to set com.apple.spaces[app-bindings] doesn't work
Dock:
  Bitwarden:
    Options:
      Assign To: All Desktops
  Calendar:
    Options:
      Assign To: All Desktops
  Messages:
    Options:
      Assign To: All Desktops
  Microsoft Teams:
    Options:
      Assign To: All Desktops
  Podcasts:
    Options:
      Assign To: All Desktops
  Qobuz:
    Options:
      Assign To: All Desktops
  Telegram:
    Options:
      Assign To: All Desktops
  Textual:
    Options:
      Assign To: All Desktops
  WhatsApp:
    Options:
      Assign To: All Desktops

Applications:
  Safari:
    Preferences:
      Websites:
        Page Zoom:
          canonical.lightning.force.com: 85%
        Camera:
          meet.google.com: Allow
        Microphone:
          meet.google.com: Allow
      Extensions:
        - AdGuard Advanced Blocking
        - AdGuard Custom
        - AdGuard General
        - AdGuard Other
        - AdGuard Privacy
        - AdGuard Safari Icon
        - AdGuard Security
        - AdGuard Social
        - Bitwarden:
          - Always Allow on Every Website
      Advanced:
        Show Develop menu in menu bar: True

  AdGuard for Safari:
    General:
      Launch AdGuard for Safari at Login: True
      Show AdGuard for Safari in the menu bar: False
      Notify about extension updates: False
      Enable hardware acceleration: False
    Filters:
      Allowlist: |
        charmhub.io
        jaas.ai
      Ad Blocking:
        Enabled: True  # default
        AdGuard Base filter: True  # default
        Peter Lowe's Blocklist: True
      Privacy:
        Enabled: True  # default
        AdGuard Tracking Protection filter: True  # default
        EasyPrivacy: True
        Fanboy's Enhanced Tracking List: True
      Social Widgets:
        Enabled: True
        AdGuard Social Media filter: True  # default when Social Widgets first enabled
        Fanboy's Social Blocking List: True
      Annoyances:
        Enabled: True
        AdGuard Annoyances filter: True  # default when Annoyances first enabled
        Fanboy's Annoyances: True
        Web Annoyances Ultralist: True
        Adblock Warning Removal List: True
        I don't care about cookies: True
      Security:
        Enabled: True
        Online Malicious URL Blocklist: True
        Spam404: True
        NoCoin Filter List: True
      Language-specific: False

  asciinema: Run `asciinema auth`

  Bitwarden:
    Unlock with Touch ID: True  # Requires Touch ID to be accessible, i.e. lid open
    Enable browser integration: True
    Require verification for browser integration: True

  Calendar:
    Calendars:
      - Delete all local calendars (On My Mac)

  Contacts:
    Preferences:
      General:
        Sort By: First Name
    Contacts:
      - Delete 'Apple Inc.' contact
      - Select Canonical Directory as default

  Finder:
    View menu options:
      Sort By:
        Snap to Grid: True  # While on Desktop
      Show Path Bar: True  # While in Finder window
    Sidebar:
      - Add Home folder above default user folders

  Firefox:
    Extensions:
      - Bitwarden:
        - https://addons.mozilla.org/en-GB/firefox/addon/bitwarden-password-manager/
        - Run in Private Windows: True

  Google Chrome:
    Menu options:
      Warn Before Quitting: False

  IINA:
    Utilities:
      Set IINA as the Default Application:
        - Video  # default
        - Audio  # default
        - Playlist  # default

  iTerm2:
    General:
      Preferences:
        Load preferences from a custom folder or URL: ~/.config/iterm2/

  LaunchBar:
    bswinnerton/launchbar-github:
      - Grant access: https://github.com/bswinnerton/launchbar-github#github-access-token

  LibreOffice:
    LibreOffice:
      General:
        Show \"Tip of the Day" dialogue box on start-up: False

  Linn Kazoo:
    App Settings:
      Network Interface: Set to system interface

  Mail:
    Preferences:
      Accounts:
        Canonical:
          Account Information:
            Download Attachments: False
          Mailbox Behaviours:
            Erase deleted messages: False
      Signatures:
        Canonical:
          Choose Signature: Canonical
        DSE:
          Choose Signature: DSE
      Rules:
        Salesforce Notifications:
          If all of the following conditions are met:
            - [ Subject, begins with, '[SFDC]' ]
          Perform the following actions:
            - [ Play sound, New Messages Sound ]
            - [ Send Notification ]
    Smart Mailboxes:
      Salesforce:
        Contains messages that match all of the following conditions:
          - [ Subject, begins with, '[SFDC]' ]
        Include messages from Sent: True
    Mailbox List:
      - Expand Smart Mailboxes and any account mailbox sections
      - Shrink Favourites

  Matterhorn: |
    Follow
    https://github.com/matterhorn-chat/matterhorn/blob/master/docs/sample-config.ini
    to create a Keychain item for the token, called "matterhorn-canonical".

  Microsoft apart from Teams:
    - Sign in

  Microsoft Teams:
    General:
      Theme: Dark
      Enable logging for meeting diagnostics: False
      Turn off animations: True
      Show suggested replies in chat: False
    Privacy:
      Surveys: False
      Optional connected experiences: False
    Notifications:
      Missed activity emails: False
      Notification style: Mac

  NetNewsWire:
    Accounts:
      On My Mac:
        Active: False
      iCloud: True

  Podcasts:
    Menu options:
      Account:
        Sign In: True

  Qobuz:
    Music playing:
      Streaming quality: 16/44.1

  SoundSource:
    - Remove default effects, add Headphone EQ

  Telegram:
    # First sign-in doesn't work with proxy
    General:
      Show Icon in Menu Bar: False
    Notifications and Sounds:
      Message Preview: False
      Notification Tone: Tremolo
      When app is in focus:
        Show notifications: True
    Data and Storage:
      Storage Usage:
        Keep Media: 1 month
        Maximum Cache Size: 16GB
      Download Folder: ~/Downloads/Telegram/
    Appearance:
      Bubble Mode: True
      Auto-Night Mode:
        Preferred Dark Theme: System

  Textual:
    Servers:
      # https://help.codeux.com/textual/Connecting-to-ZNC-Bouncer.kb
      Freenode:
        General:
          Connect when Textual opens: True
          Perform reconnect on disconnect: True

  Tunnelblick:
    Configurations: Add Canonical VPN configurations
    Appearance:
      Display connection timers: True
      Display window when Tunnelblick is starting up: False
      VPN Status windows: False

  VMware Fusion:
    General:
      When closing a virtual machine:
        Confirm before closing: True
    Feedback:
      Join the VMware Customer Experience Improvement Program: False

  WireGuard:
    - Add VPN configuration, see https://github.com/jmcvaughn/dotfiles/tree/home-router/.docs#wireguard

  zoom.us:
    General:
      Show my meeting duration: True
      Add Zoom to macOS menu bar: False
      Stop my video and audio when my display is off or screen saver begins: True
    Video:
      Ratio: Original
      Adjust for low light: True
      Always display participant name on their videos: True
      Turn off my video when joining a meeting: True
    Audio:
      Automatically join computer audio when joining a meeting: True
      Mute my mic when joining a meeting: True
    Share Screen:
      Window size when screen sharing: Maintain current size
      Side-by-side Mode: True

File associations:
  less.app:
    - .cfg
    - .conf
    - .csv
    - .ini
    - .log
    - .md
    - .out
    - .txt
    - .xml
    - .yaml/.yml  # macOS is smart enough to know these are the same
  LibreCAD:
    - .dxf
  The Unarchiver:
    - .7z

Licenses:
  - LaunchBar
  - SoundSource
  - Textual
  - Vagrant VMware provider (https://www.vagrantup.com/docs/providers/vmware/installation)
  - VMware Fusion
